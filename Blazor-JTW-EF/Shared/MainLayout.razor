@inherits LayoutComponentBase

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<PageTitle>Blazor-JTW-EF</PageTitle>

<div class="page">
    @* <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
            @firstName @position
            <a href="https://docs.microsoft.com/aspnet/" target="_blank">About</a>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main> *@
    <MudLayout>
    <MudAppBar Elevation="1" Dense>
        <AuthorizeView>
            <Authorized>
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
                <MudSpacer />
                @firstName @position
            </Authorized>
            <NotAuthorized>
                WELCOME TO SYSTEM
            </NotAuthorized>
        </AuthorizeView>
    </MudAppBar>
    <AuthorizeView>
        <Authorized>
            <MudDrawer @bind-Open="@_open" Elevation="1" Variant="@DrawerVariant.Responsive">
                <MudDrawerHeader>
                    <MudText Typo="Typo.h6">My App</MudText>
                </MudDrawerHeader>
                <MudNavMenu>
                    <MudNavLink Match="NavLinkMatch.All">Store</MudNavLink>
                    <MudNavLink Match="NavLinkMatch.All">Library</MudNavLink>
                    <MudNavLink Match="NavLinkMatch.All">Community</MudNavLink>
                </MudNavMenu>
            </MudDrawer>
        </Authorized>
    </AuthorizeView>
    <MudMainContent Class="main-content">
        @Body
    </MudMainContent>
</MudLayout>
</div>

@code
{
    private string firstName;
    private string lastName;
    private string middleName;
    private string position;
    private bool _open = false;
    protected override async Task OnInitializedAsync()
    {
        var authState = await _authenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity.IsAuthenticated)
        {
            firstName = user.FindFirst("firstname")?.Value;
            lastName = user.FindFirst("lastname")?.Value;
            middleName = user.FindFirst("middlename")?.Value;
            position = user.FindFirst("position")?.Value;
        }
    }
    private void ToggleDrawer()
    {
        _open = !_open;
    }
}
<style>
    .main-content {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
</style>